---
- name: Install GNU stow
  ansible.builtin.package:
    name: stow
    state: present

- name: Create test target directory in {{ target_dir }}
  ansible.builtin.file:
    path: "{{ target_dir }}"
    state: directory
    mode: '0755'

- name: Create test source directory in {{ source_dir }}
  ansible.builtin.file:
    path: "{{ source_dir }}"
    state: directory
    mode: '0755'

- name: Run first test
  ansible.builtin.include_tasks: test_failure_dir_not_exist.yml

- name: Run second test
  ansible.builtin.include_tasks: test_check_mode.yml
